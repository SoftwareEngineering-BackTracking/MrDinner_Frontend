<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Mr.Daebak Dinner Service</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
        <link href="../css/navbar.css" rel="stylesheet" />
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel = "stylesheet"/>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel = "stylesheet"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel = "stylesheet"/>
        <!-- Core theme CSS (includes Bootstrap)-->
        
        <link href="../css/orderPay.css" rel="stylesheet" />
        <link href="../css/order-box.css" rel="stylesheet" />
        <link href="../css/cart-box.css" rel="stylesheet" />
    </head>

    <body id="page-top">
        <!-- Navigation-->
        <iframe src="navbar.html" onload="
        this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()">
        </iframe> <!-- navbar.html 추가-->
    </body>

    <header class = 'cart-head'>
        <div class = 'link-box'>
            <div class = 'shipping-box'>
                <p class = 'normal-shipping' style="font-weight: bold; font-size: 20px;">일반 배송</p>
                <i class = 'line'>|</i>
                <p class = 'reservation-shipping' style="font-weight: bold; font-size: 20px;">예약 배송</p>
            </div>
            <div class = 'progress-route-box'>
                <a style="font-weight: bold; color: rgb(174, 172, 172); font-size: 20px;">장바구니</a>
                <p>></p>
                <a style="font-weight: bold; font-size: 20px;">주문/결제</a>
                <p>></p>
                <a style="font-weight: bold; color: rgb(174, 172, 172); font-size: 20px;">완료</a>
            </div>
        </div>
        <div class = 'border'></div>
    </header>
    <div class = 'order-container'>
        <div class = 'title'>주문 정보</div>
        <div id = 'order-content'>
            <div class = 'cart-box'>
                <div class = 'cart-img-box'>
                  <div class = 'cart-img'></div>
                </div>
                <div class = 'cart-info-box'>
                  <div class = 'title'>발렌타인</div>
                  <div class = 'style'>심플</div>
                  <div class = 'hash-tag'>ㅋㅋ</div>
                  <div class = 'hash-tag'>ㅋㅋ</div>
                </div>
                <div class = 'cart-right-box'>
                  <button class = 'cart-delete' id = '${i}delete-button' onclick = "deleteCartItem(${res.cartItems[i].cartItemNo})">삭제하기</button>
                  <div class = 'cart-price'>18000원</div>
                </div>
            </div>
        </div>     
            <div id = 'cart-price-box'>
                <div id = 'total-price'>Total Price: 100원</div>
            </div>
        
    </div>
    <hr style="width: 70%; margin-top: 50px;">        
    
    <div class = 'customer-info-container'>
        <div class = 'title'>결제</div>
        <button id = 'coupon-btn' onclick="openCouponModal()">쿠폰 선택하기</button>
        <div id = 'customer-info-box'>
            <div class = 'customer-info-top'>
                <div class = 'customer-title'>주문자 정보</div>
            </div>
            <div class = 'customer-info'>
                <div class = 'name'>김민서</div>
                <div class = 'phone-number'>010-xxxx-xxxx</div>
                <div class = 'address'>서울특별시 동대문구 전농동 서울시립대학교</div>
            </div>
        </div>
        <hr style="width: 60%; margin-top: 50px;"> 
        <div class = 'title' style="font-size: 20px; margin-top: 3rem;">결제 수단 등록</div>
        <div class = 'purchase-info-box'>
            <div class = 'purchase-info-top'>
                <div class = 'purchase-title'>결제 수단 정보</div>
                <a id = 'create-purchase' style="color: blue;" onclick="openPurchaseModal()">결제 수단 등록하기</button></a>
            </div>
            <div class = 'purchase-info'>
                <div id = 'bank'>NH농협</div>
                <div id = 'card-number'>302-4530-9648-81</div>
            </div>
        </div>
    </div>
    
    <div class = 'modal-container' id = "modal2">
        <div id = 'coupon-modal'>
            <div id = 'close-btn' onclick="closeCouponModal()"><i class="fa fa-times"></i></div>
            <div class = 'coupon-modal-title' style="color: black;">쿠폰 목록</div>
            <div class = 'coupon-modal-content'>
                <div class = 'about'style="color: black;">
                    <p style="font-size: 25px; padding-left: 2rem; padding-top: 1rem; font-weight: bold;"> 사용할 쿠폰을 선택하세요! </p>
                    <div id = 'coupon-list'>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <div class = 'modal-container' id = "modal">
        <div id = 'pay-modal'>
            <div id = 'close-btn'><i class="fa fa-times" onclick="closePurchaseModal()"></i></div>
            <div class = 'pay-modal-title' style="color: black;">결제창</div>
            <div class = 'pay-modal-content'>
                <div class = 'about'style="color: black;">카드 번호를 입력하세요!</div>
                
                <select id = 'bank-select' name = 'bank-select'>
                    <option value = '농협'>NH농협</option>
                    <option value = '기업'>IBK기업</option>
                    <option value = '국민'>KB국민</option>
                </select>
                <div class = 'card-number-box'>
                    <input id = 'card-number1'>ㅡ
                    <input id = 'card-number2'>ㅡ
                    <input id = 'card-number3'>ㅡ
                    <input id = 'card-number4'>
                    <button class = 'pay' style="cursor:pointer" onclick="createPurchase()">등록</button>
                </div>
                
            </div>
        </div>
    </div>
    <script src="../js/orderPay.js"></script>
    <div class = 'pay-container'>
        <button id = 'pay-btn' onclick="payCart(); location.href = 'main.html'">결제하기</button>
    </div>
    <script language = 'JavaScript'>
        var res;
        function get_res(){
            res = fetchCartItem().then((response) => {
                console.log(response);
                return response;
            });
            
        }
    
        window.onload = get_res();
        
       
    
    </script>
</html>