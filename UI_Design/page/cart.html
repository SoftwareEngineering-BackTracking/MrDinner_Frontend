<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Mr.Daebak Dinner Service</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../css/navbar.css" rel="stylesheet" />
        <link href="../css/cart.css" rel="stylesheet" />
        <link href="../css/cart-box.css" rel="stylesheet" />
        <script src="../js/cookie.js"></script>
        <script>
            window.onload = login_info()
        </script>
    </head>

    <body id="page-top">
        
        <!-- Navigation-->
        <iframe src="navbar.html" onload="
        this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()">
        </iframe> <!-- navbar.html 추가-->

        <header class = 'cart-head'>
            <div class = 'link-box'>
                <div class = 'shipping-box'>
                    <p class = 'normal-shipping' style="font-weight: bold; font-size: 20px;">일반 배송</p>
                    <i class = 'line'>|</i>
                    <p class = 'reservation-shipping' style="font-weight: bold; font-size: 20px;">예약 배송</p>
                </div>
                <div class = 'progress-route-box'>
                    <a style="font-weight: bold; font-size: 20px;">장바구니</a>
                    <p>></p>
                    <a style="font-weight: bold; color: rgb(174, 172, 172); font-size: 20px;">주문/결제</a>
                    <p>></p>
                    <a style="font-weight: bold; color: rgb(174, 172, 172); font-size: 20px;">완료</a>
                </div>
            </div>
            <div class = 'border'></div>
        </header>
        <div class = 'detail-modal'>
            <div class = 'modal-title'>품목 추가</div>
            <div id = 'modal-content'>
                <div id = 'close-btn' onclick="closeDetail()">X</div>
                <div class = 'detail-box'>
                    
                    <div class = 'detail-img-box'>
                        <div class = 'detail-img'></div>
                    </div>
                    <div class = 'detail-info-box'>
                        <button id = 'add-detail'>추가하기</button>
                        <div id = 'dinnerIngredient'>발렌타인_고기</div>
                        <div class = 'price-quantity-box'>
                            <div id = 'price'>1000원</div>
                        </div>
                    </div>
                    
                </div>
                <div class = 'detail-box'>
                    
                    <div class = 'detail-img-box'>
                        <div class = 'detail-img'></div>
                    </div>
                    <div class = 'detail-info-box'>
                        <button id = 'add-detail'>추가하기</button>
                        <div id = 'dinnerIngredient'>발렌타인_고기</div>
                        <div class = 'price-quantity-box'>
                            <div id = 'price'>1000원</div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class = 'cart-container'>
            <div class = 'ad1'></div>
            <div class = 'cart-subcontainer'>
                <div id = 'cart-test'>
                    <div class = 'cart-box'>
                        <div class = 'show-detail' onclick="openrenderDetail()">?</div>
                        <div class = 'cart-img-box'>
                            <div class = 'cart-img'></div>
                        </div>
                        <div class = 'cart-info-box'>
                            <p id = 'cartItemNo'></p>
                            <div class = 'title'>발렌타인</div>
                            <div class = 'style'>심플</div>
                            <div class = 'style' style = 'cursor: pointer;' onclick="renderDetail('${res.cartItems[i].dinner.dinner}', ${res.cartItems[i].cartItemNo})">추가메뉴</div>
                            <div class = 'hash-tag'>ㅋㅋ</div>
                        </div>
                        <div class = 'cart-right-box'>
                            <button class = 'cart-delete' id = '${i}delete-button' onclick = "deleteCartItem(${res.cartItems[i].cartItemNo})">삭제하기</button>
                            <div class = 'cart-price'>1원</div>
                        </div>
                        <div class = 'render-detail'>
                            <div id = 'close-detail-btn' onclick="closerenderDetail()">X</div>
                            <div class = 'title'>추가된 목록</div>
                            <p style="font-size: 20px; padding-left: 2rem;">1. 발렌타인_고기, 가격:</p>
                        </div>
                    </div>
                </div>
                <div class = 'order-box'>
                    <button class = 'order' onclick="location.href = 'orderPay.html'">주문하기</button>
                </div>
            </div>
            
            <div class = 'ad2'></div>
        </div>
        
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="../js/scripts.js"></script>
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script> -->
        
    </body>
</html>

<script>
    function selectAll(selectAll)  {
    const checkboxes = document.getElementsByName('cart-each-btn');
    checkboxes.forEach((checkbox) => {
        checkbox.checked = selectAll.checked;
        })
    }

    const minseo = 1;
</script>
<script src="../js/cart.js"></script>

<script language = 'JavaScript'>
    var res;
    function get_res(){
        res = fetchCartItem().then((response) => {
            console.log(response);
            return response;
        });
        
    }

    window.onload = get_res();
    
   

</script>

<script>
    function openrenderDetail(cartNo){
        document.getElementsByClassName('render-detail')[0].style.display = 'flex';
        fetchCartDetail(cartNo);
    }

    function closeDetail(){
        document.getElementsByClassName('detail-modal')[0].style.display = 'none';
    }

    function closerenderDetail(){
        document.getElementsByClassName('render-detail')[0].style.display = 'none';
    }
</script>